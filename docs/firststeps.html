<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Stockage de données dans Nubonyxia" href="minio.html" /><link rel="prev" title="Bienvenue dans la documentation de Nubonyxia!" href="index.html" />

    <!-- Generated with Sphinx 7.2.6 and Furo 2024.01.29 -->
        <title>Premiers pas avec Nubonyxia - Nubonyxia 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="_static/tabs.css?v=a5c4661c" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=36a5483c" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">Nubonyxia 0.1 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">Nubonyxia 0.1 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Premiers pas avec Nubonyxia</a></li>
<li class="toctree-l1"><a class="reference internal" href="minio.html">Stockage de données dans Nubonyxia</a></li>
<li class="toctree-l1"><a class="reference internal" href="methode.html">Guide des bonnes pratiques</a></li>
<li class="toctree-l1"><a class="reference internal" href="services.html">Configuration des services</a></li>
<li class="toctree-l1"><a class="reference internal" href="usecase.html">Cas d’usages Nubonyxia</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="premiers-pas-avec-nubonyxia">
<h1>Premiers pas avec Nubonyxia<a class="headerlink" href="#premiers-pas-avec-nubonyxia" title="Link to this heading">#</a></h1>
<p>Cette page offre une visite guidée de <a class="reference external" href="https://nubonyxia.incubateur.finances.rie.gouv.fr">Nubonyxia</a> et donne une desciption <em>pas à pas</em> des différentes étapes du lancement d’un service sur la plateforme.</p>
<section id="ajout-du-certificat-dans-le-navigateur">
<h2>1- Ajout du certificat dans le navigateur<a class="headerlink" href="#ajout-du-certificat-dans-le-navigateur" title="Link to this heading">#</a></h2>
<p>Dans un premier temps, avant d’accéder à la plateforme, il est nécessaire d’ajouter le certificat, accessible <a class="reference external" href="https://nubonyxia.incubateur.finances.rie.gouv.fr/statics/bercyCA.crt">ici</a>, dans le navigateur de votre choix. En effet, nous travaillons pour le moment avec un certificat auto-signé.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Cette manipulation est à faire une seule fois.</p>
</div>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-0">
avec Firefox</label><div class="sd-tab-content docutils">
<ul class="simple">
<li><p>Aller dans le menu Paramètres, rechercher Certificats</p></li>
<li><p>Cliquer sur le bouton Afficher les certificats</p></li>
<li><p>Aller dans l’Onglet Autorités</p></li>
<li><p>Cliquer sur le bouton Importer et sélectionner le certificat bercyCA.crt</p></li>
</ul>
</div>
<input id="sd-tab-item-1" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-1">
avec Edge</label><div class="sd-tab-content docutils">
<ul class="simple">
<li><p>Aller dans les paramètres du navigateur, chercher Certificats</p></li>
<li><p>Cliquer sur Gérer les certificats qui devrait ouvrir une fenêtre Windows</p></li>
<li><p>Sélectionner l’onglet Autorités de certification racine de confiance</p></li>
<li><p>Importer le certificat bercyCA.crt</p></li>
</ul>
</div>
</div>
</section>
<section id="connexion-a-la-plateforme">
<h2>2- Connexion à la plateforme<a class="headerlink" href="#connexion-a-la-plateforme" title="Link to this heading">#</a></h2>
<p>L’accès à la plateforme se fait en utilisant l’identifiant et mot de passe que l’on vous aura communiqué. Nous utilisons <a class="reference external" href="https://www.keycloak.org">keycloak</a> pour gérer l’authentification.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Nous travaillons actuellement à intégrer <strong>agent connect</strong> à la plateforme. Pour le moment, nous gérons à la main les comptes utilisateurs (pas de fédérateur d’identité).</p>
</div>
</section>
<section id="vue-generale-de-la-plateforme">
<h2>3- Vue générale de la plateforme<a class="headerlink" href="#vue-generale-de-la-plateforme" title="Link to this heading">#</a></h2>
<p>L’interface du datalab <a class="reference external" href="https://nubonyxia.incubateur.finances.rie.gouv.fr">Nubonyxia</a> est très largement inspirée de celle du <a class="reference external" href="https://datalab.sspcloud.fr">SSP Cloud</a>.
insérer schéma relation entre différentes composantes</p>
<p>A la disposition de l’utilisateur :</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3 sd-fade-in-slide-down">
<summary class="sd-summary-title sd-card-header">
un espace de stockage<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text"><a class="reference external" href="https://nubonyxia.incubateur.finances.rie.gouv.fr">Nubonyxia</a> n’échappe pas à la tendance de fond observée dans la Data et le Cloud, qui consiste à séparer l’espace de stockage des données des services où elles sont traitées. Pour plus d’informations sur le bucket S3 basé sur <a class="reference external" href="https://minio-console.lab.incubateur.finances.rie.gouv.fr/">MinIO</a> mis à la disposition des utilisateurs, consulter cette <a class="reference internal" href="minio.html"><span class="doc">page</span></a>.</p>
<p class="sd-card-text">Cette séparation entre l’espace de stockage des données et l’environnement où elles sont traitées offre plusieurs avantages :</p>
<ul class="simple">
<li><p class="sd-card-text">découpler le stockage et le calcul,</p></li>
<li><p class="sd-card-text">garantir une <strong>reproductibilité des analyses</strong>,</p></li>
<li><p class="sd-card-text">permettre une <strong>optimisation des coûts</strong>. En effet, on peut dès lors adapter les ressources en fonction des besoins de stockage et de calcul.</p></li>
</ul>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3 sd-fade-in-slide-down">
<summary class="sd-summary-title sd-card-header">
un catalogue de services<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">Les services mis à la disposition des utilisateurs sont dans l’onglet <span class="menuselection">Catalogue de services</span>. Ces derniers se répartissent selon plusieurs catégories et permettent de répondre à un large spectre de cas d’usages <em>data</em>.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-2" name="sd-tab-set-1" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-2">
IDE</label><div class="sd-tab-content docutils">
<ul class="simple">
<li><p class="sd-card-text"><code class="code highlight python docutils literal highlight-python"><span class="n">Vscode</span><span class="o">-</span><span class="n">python</span></code> : Vscode avec Python, Julia et une collection de packages <em>data science</em> intégrés</p></li>
<li><p class="sd-card-text"><code class="code highlight python docutils literal highlight-python"><span class="n">Vscode</span><span class="o">-</span><span class="n">pytorch</span></code>: Vscode enrichi avec le framework de <em>deep learning</em> <code class="code highlight python docutils literal highlight-python"><span class="n">pyorch</span></code></p></li>
<li><p class="sd-card-text"><code class="code highlight python docutils literal highlight-python"><span class="n">Vscode</span><span class="o">-</span><span class="n">nodejs</span></code> : Vscode enrichi de <cite>NodeJs runtime</cite> et donc adapté pour le développement web.</p></li>
<li><p class="sd-card-text"><code class="code highlight python docutils literal highlight-python"><span class="n">jupyter</span><span class="o">-</span><span class="n">python</span></code>: JupterLab avec Python, Julia et une collection de packages <em>data science</em> intégrés</p></li>
<li><p class="sd-card-text"><code class="code highlight python docutils literal highlight-python"><span class="n">jupyter</span><span class="o">-</span><span class="n">pyspark</span></code>: JupyterLab intégrant <a class="reference external" href="https://spark.apache.org/docs/latest/api/python/index.html">Apache Spark</a> pour réaliser du calcul distribué avec Python.</p></li>
<li><p class="sd-card-text"><code class="code highlight python docutils literal highlight-python"><span class="n">R</span> <span class="n">studio</span></code> : RStudio avec les packages de <em>data science</em> intégrés</p></li>
</ul>
</div>
<input id="sd-tab-item-3" name="sd-tab-set-1" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-3">
Gestion de base de données</label><div class="sd-tab-content docutils">
<ul class="simple">
<li><p class="sd-card-text"><a class="reference external" href="https://www.postgresql.org">PostgreSQL</a></p></li>
<li><p class="sd-card-text"><a class="reference external" href="https://github.com/dbeaver/cloudbeaver">Cloudbeaver</a></p></li>
<li><p class="sd-card-text"><a class="reference external" href="https://data-apis-v2.nocodb.com">NocoDB</a></p></li>
</ul>
</div>
<input id="sd-tab-item-4" name="sd-tab-set-1" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-4">
Data Visualisation</label><div class="sd-tab-content docutils">
<ul class="simple">
<li><p class="sd-card-text"><a class="reference external" href="https://superset.apache.org">Superset</a></p></li>
</ul>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p class="sd-card-text">Si vous avez besoin d’un service en particulier qui est indisponible dans notre catalogue, n’hésitez pas à nous en faire part. Nous sommes à l’écoute de nos utilisateurs pour enrichir notre catalogue !</p>
</div>
<p class="sd-card-text">Vous trouverez <a class="reference internal" href="services.html"><span class="doc">ici</span></a> les explications sur la configuration des différents services. Des exemples de cas d’usages sont présentés dans cette <a class="reference internal" href="usecase.html"><span class="doc">page</span></a>.</p>
<p class="sd-card-text">Les services lancés par l’utilisateur apparaissent dans l’onglet <span class="menuselection">Mes services</span>. Il est possible de lancer à la demande plusieurs services à la fois.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p class="sd-card-text">Les services ont des tokens d’expiration. Lorsqu’ils ne sont plus utilisés, pensez à bien les supprimer, voir <a class="reference internal" href="methode.html"><span class="doc">guide des bonnes pratiques</span></a>.</p>
</div>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3 sd-fade-in-slide-down">
<summary class="sd-summary-title sd-card-header">
une connexion git intégrée<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">La sauvegarde des codes ainsi que la gestion des versions sont assurées par une instance <strong>Git</strong>. Le datalab de <a class="reference external" href="https://nubonyxia.incubateur.finances.rie.gouv.fr">Nubonyxia</a> facilite son implémentation en offrant une connexion à la <em>forge interministérielle</em> de la DGFiP. Cette dernière est hébergée sur une instance GitLab. La plateforme autorise également une connexion à GitHub. Nous recommendons toutefois l’utilisation de la <a class="reference external" href="https://forge.dgfip.finances.rie.gouv.fr/">forge</a> pour stocker vos codes et déployer des applications afin de bénéficier du <a href="#id1"><span class="problematic" id="id2">`</span></a><a class="reference external" href="https://www.renater.fr/projets-et-partenariats/projets-specifiques/le-reseau-interministeriel-de-letat-rie/">RIE</a> (ie, le réseau interministériel).</p>
<p class="sd-card-text">La configuration d’un serveur Git sur <a class="reference external" href="https://nubonyxia.incubateur.finances.rie.gouv.fr">Nubonyxia</a> ainsi que son utilisation sont détaillées dans la section <a class="reference internal" href="methode.html"><span class="doc">guide des bonnes pratiques</span></a>.</p>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3 sd-fade-in-slide-down" id="secretcreate">
<summary class="sd-summary-title sd-card-header">
une gestion de secret<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">Certains usages requièrent  de fournir à un service des variables d’environnement sous forme de secret - sans les écrire en clair dans le code de chaque service. Cela est géré par <a class="reference external" href="https://nubonyxia.incubateur.finances.rie.gouv.fr/account/vault">Vault</a> dans notre plateforme.
Se référer à la section <a class="reference internal" href="services.html#gestionvault"><span class="std std-ref">Gestion des secrets</span></a> pour la création et la gestion des variables environnements.</p>
</div>
</details></section>
<section id="lancement-d-un-service">
<h2>4- Lancement d’un service<a class="headerlink" href="#lancement-d-un-service" title="Link to this heading">#</a></h2>
<p>Nous avons mis à disposition sur la <a class="reference external" href="https://forge.dgfip.finances.rie.gouv.fr/">forge</a> un repo nommé <a class="reference external" href="https://forge.dgfip.finances.rie.gouv.fr/bercyhub/nubonyxia/quick-start">Quick Start</a> avec des scripts de <em>data visualisation</em> prêt-à-être exécutés.</p>
<p>Pour lancer un service, il suffit de se rendre dans l’onglet <span class="menuselection">Catalogue de services</span>. Vous pouvez lancer le service IDE de votre choix. Le service lancé apparaît alors dans la page <a class="reference external" href="https://nubonyxia.incubateur.finances.rie.gouv.fr/my-services">Mes Services</a>. L’accès au service se fait en cliquant sur le bouton <code class="code highlight python docutils literal highlight-python"><span class="n">Ouvrir</span></code>. Un mot de passe est alors fourni pour pouvoir accéder au service. Les informations relatives aux tokens peuvent être consultés en cliquant sur l’icône information en bas à gauche du service instancié.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Il est possible de lancer différentes instances d’un même service. Ainsi on peut avoir différent services <code class="code highlight python docutils literal highlight-python"><span class="n">vscode</span></code> qui tournent en même temps sur la plateforme. Cela ne s’applique pas pour les services reposant sur des <em>permanent virtual circuit</em> (PVC) à l’instar des services de la catégorie <strong>base de données</strong> comme <code class="code highlight python docutils literal highlight-python"><span class="n">Postgresql</span></code>. Autrement dit, si un service <code class="code highlight python docutils literal highlight-python"><span class="n">Postgresql</span></code> est déjà ouvert, il faut d’abord le supprimer avant d’en lancer un nouveau. Il en est de même pour le service <code class="code highlight python docutils literal highlight-python"><span class="n">Superset</span></code>.</p>
</div>
<p>L’interface Onyxia permet de configurer le service que l’on va lancer comme le montre en détail la section <a class="reference internal" href="services.html"><span class="doc">Configuration de services</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Les <strong>tokens S3</strong> et <strong>git</strong> sont déjà pré-configurés.</p>
</div>
<p>Après avoir renseigné son token d’accès Gitlab dans le datalab (voir section <a class="reference internal" href="methode.html#gitconfig"><span class="std std-ref">Configuration du Git pour la première fois</span></a>), l’utilisateur peut directement cloner le repo en s’identifiant avec son token stocké sous forme de variable d’environnement <code class="code highlight python docutils literal highlight-python"><span class="err">$</span><span class="n">GIT_PERSONAL_ACCESS_TOKEN</span></code> à l’aide de la ligne de commande suivante :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//&lt;</span><span class="n">gitlab</span><span class="o">-</span><span class="n">user</span><span class="o">&gt;</span><span class="p">:</span><span class="err">$</span><span class="n">GIT_PERSONAL_ACCESS_TOKEN</span><span class="nd">@forge</span><span class="o">.</span><span class="n">dgfip</span><span class="o">.</span><span class="n">finances</span><span class="o">.</span><span class="n">rie</span><span class="o">.</span><span class="n">gouv</span><span class="o">.</span><span class="n">fr</span><span class="o">/&lt;</span><span class="n">owner</span><span class="o">&gt;/&lt;</span><span class="n">repo</span><span class="o">&gt;.</span><span class="n">git</span>
</pre></div>
</div>
<p>où <strong class="program">&lt;owner&gt;</strong> et <strong class="program">&lt;repo&gt;</strong> sont à remplacer respectivement par le nom d’utilisateur et le nom du repo Git.</p>
<p>Il est également possible de cloner le repo au lancement du service dans l’interface, comme le montre la section <a class="reference internal" href="methode.html#gitservice"><span class="std std-ref">Utilisation de Git avec les services du Datalab</span></a>.</p>
<p>Dans le service IDE , il est possible de télécharger en complément des librairies Python ou R, grâce au <cite>Nexus</cite> mis en place par la DGFIP. En effet bien que la plateforme soit isolée d’internet, un point d’accès à Pypi (librairies Python) et CRAN (packages R) est mis en place grâce à un miroir (Nexus de la DGFiP). Il est ainsi possible de réaliser <strong class="program">pip install</strong> suivi de la librairie de votre choix pour Python et <strong class="program">install.package(&quot;&quot;)</strong> pour R.</p>
</section>
<section id="suppression-d-un-service">
<h2>4- Suppression d’un service<a class="headerlink" href="#suppression-d-un-service" title="Link to this heading">#</a></h2>
<p>Les services de développement comme <code class="code highlight python docutils literal highlight-python"><span class="n">vscode</span></code> ou <code class="code highlight python docutils literal highlight-python"><span class="n">jupyter</span><span class="o">-</span><span class="n">notebook</span></code> lancés sur la plateforme n’ont pas pour vocation d’être utilisés <em>ad vitam eternam</em>. De fait, les tokens d’accès expirent au bout d’un certain temps. Il faut donc supprimer le service et en relancer un autre. Pour ce faire, cliquer sur l’icône poubelle figurant en dessous du sevice instancié.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Les ressources nécessaires à la bonne exécution des services sont partagées au sein de la communauté des utilisateurs. Pensez donc à bien supprimer les services que vous n’utlisez plus afin de libérer des ressources.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Avant de supprimer un service, pensez à bien sauvegarder vos codes et vos données comme illustré dans la section <a class="reference internal" href="methode.html"><span class="doc">Guide des bonnes pratiques</span></a>. En effet, pour certains services, la suppression d’une instance est susceptible d’entraîner la suppression de toutes les données associées.</p>
</div>
<p>Les services de bases de données s’appuyant sur des PVC, la suppression complète se fait avec la ligne de commande <strong class="program">kubectl delete PVC</strong> suivi du nom du volume. Cette dernière est indiquée dans la fenêtre qui s’ouvre lors du lancement du service, comme le montre l’image ci-après.</p>
<a class="reference internal image-reference" href="_images/deletepvc.png"><img alt="Alternative text" src="_images/deletepvc.png" style="width: 800px;" /></a>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Pour exécuter la ligne de commande <strong class="program">kubectl delete PVC</strong>, il faut ouvrir un vscode et sélectionner le role <em>admin</em> dans l’onglet <strong>Kubernetes</strong> présent dans la configuration (voir section <a class="reference internal" href="services.html#servicesconfig"><span class="std std-ref">Options de configurations</span></a>)</p>
</div>
</section>
<section id="pour-aller-plus-loin">
<h2>Pour aller plus loin<a class="headerlink" href="#pour-aller-plus-loin" title="Link to this heading">#</a></h2>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="minio.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Stockage de données dans Nubonyxia</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="index.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Home</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, Bercy Hub
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Premiers pas avec Nubonyxia</a><ul>
<li><a class="reference internal" href="#ajout-du-certificat-dans-le-navigateur">1- Ajout du certificat dans le navigateur</a></li>
<li><a class="reference internal" href="#connexion-a-la-plateforme">2- Connexion à la plateforme</a></li>
<li><a class="reference internal" href="#vue-generale-de-la-plateforme">3- Vue générale de la plateforme</a></li>
<li><a class="reference internal" href="#lancement-d-un-service">4- Lancement d’un service</a></li>
<li><a class="reference internal" href="#suppression-d-un-service">4- Suppression d’un service</a></li>
<li><a class="reference internal" href="#pour-aller-plus-loin">Pour aller plus loin</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=2709fde1"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=32e29ea5"></script>
    <script src="_static/design-tabs.js?v=36754332"></script>
    </body>
</html>